<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prijsresultaat</title>
    <style>
        #loading {
            display: none;
            text-align: center;
            margin-top: 50px;
        }

        .loading-spinner {
            border: 16px solid #f3f3f3; /* Light grey */
            border-top: 16px solid #3498db; /* Blue */
            border-radius: 50%;
            width: 120px;
            height: 120px;
            animation: spin 2s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .price-output {
            text-align: center;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div id="loading">
        <div class="loading-spinner"></div>
        <p>Bezig met laden...</p>
    </div>
    <div class="price-output" id="priceOutput"></div>

    <script>
        const basePrices = {
            "Philips": { "EP 2300 series": 70, "EP 3300 series": 80, "EP 4300 series": 125, "EP 4400 series": 125, "EP 5300 series": 80, "EP 5400 series": 150, "EP 5500 series": 125 },
            "Jura": { "A series": 80, "D series": 150, "Ena series": 100, "Ena 8": 125, "E series": 150, "F series": 130, "GIGA series": 425, "GIGA X7C": 425, "GIGA X series": 700, "GIGA 10 series": 700, "X series": 700, "XF series": 150, "S series": 200, "XS series": 200, "J 5 tm 7 series": 125, "J8": 450, "J9 & J10 series": 175, "WE series": 200, "Z5": 200, "Z6": 350, "Z7": 350 },
            // Voeg hier overige merken en modellen toe...
        };

        const getQueryParams = () => {
            const params = new URLSearchParams(window.location.search);
            return {
                brand: params.get('brand'),
                model: params.get('model'),
                condition: parseFloat(params.get('condition')) || 100,
                electronics: parseFloat(params.get('electronics')) || 0,
                accessories: parseFloat(params.get('accessories')) || 0,
                cleaning: parseFloat(params.get('cleaning')) || 0
            };
        };

        const calculatePrice = ({ brand, model, condition, electronics, accessories, cleaning }) => {
            return new Promise(resolve => {
                setTimeout(() => {
                    const basePrice = basePrices[brand]?.[model];
                    if (!basePrice) return resolve('Onbekend model of merk');

                    let finalPrice = basePrice * (condition / 100);
                    finalPrice *= (1 + electronics / 100);
                    finalPrice *= (1 - accessories / 100);
                    finalPrice *= (1 + cleaning / 100);
                    
                    if (cleaning === 0) finalPrice *= 0.95; // Niet schoongemaakt

                    resolve(finalPrice.toFixed(2));
                }, 2000); // Simuleer 2 seconden vertraging
            });
        };

        const showPrice = async () => {
            const params = getQueryParams();
            document.getElementById('loading').style.display = 'block';
            const price = await calculatePrice(params);
            document.getElementById('loading').style.display = 'none';
            document.getElementById('priceOutput').innerHTML = `<h1>De berekende prijs is: â‚¬${price}</h1>`;
        };

        window.onload = showPrice;
    </script>
</body>
</html>
